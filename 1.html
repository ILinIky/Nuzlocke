<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nuzlocke Companion – Single Player</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --pk-red:#EE1515; --pk-blue:#2554C7; --pk-yellow:#FFCC00; --pk-dark:#1f1f1f; --pk-bg:#0b1020;
      --card:#111829; --muted:#93a2c7; --ring:#ffd23f; --ok:#31d0aa; --bad:#ff6b6b;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; color:#e8ecff; background: radial-gradient(1200px 600px at 10% 10%, #17224a 0, #0e1530 40%, #0b1020 100%);
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      overflow-x:hidden;
    }
    header{
      display:flex; align-items:center; justify-content:space-between; gap:16px;
      padding:16px 18px; border-bottom:1px solid rgba(255,255,255,.08);
      background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.00));
      position:sticky; top:0; z-index:10;
    }
    .brand{ display:flex; align-items:center; gap:14px; letter-spacing:.5px; }
    .logo{ width:44px; height:44px; border-radius:50%; background:
      radial-gradient(circle at 50% 35%, var(--pk-red) 0 34%, #fff 35% 65%, #111 66% 100%);
      box-shadow:0 0 0 3px #fff inset, 0 0 0 6px var(--pk-red) inset, 0 6px 22px rgba(0,0,0,.35);
      position:relative;
    }
    .logo::after{content:""; position:absolute; inset:auto 0 14px 0; height:6px; background:#fff}
    .title{ font-family:"Press Start 2P", monospace; font-size:14px; line-height:1.1; text-shadow:0 2px 0 #000; }
    .title small{display:block; color:var(--muted); font-family:Inter; font-weight:600; margin-top:4px}

    nav.tabs{ display:flex; gap:8px; flex-wrap:wrap }
    .tab-btn{
      border:1px solid rgba(255,255,255,.12); background:#0e1633; color:#dfe6ff;
      padding:10px 14px; border-radius:12px; cursor:pointer; font-weight:700; letter-spacing:.2px;
      box-shadow:0 4px 14px rgba(0,0,0,.25), inset 0 0 0 0px var(--ring);
      transition:.2s;
    }
    .tab-btn.active{ box-shadow:0 0 0 2px var(--ring) inset, 0 8px 28px rgba(255,210,63,.08) }
    .tab-btn:hover{ transform:translateY(-1px); background:#0f1a40 }

    main{ max-width:1200px; margin:18px auto 64px; padding:0 18px }
    .panel{
      display:none; border:1px solid rgba(255,255,255,.12); border-radius:18px; padding:18px; background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.00));
      box-shadow:0 18px 60px rgba(0,0,0,.35), 0 0 0 1px rgba(255,255,255,.04) inset;
    }
    .panel.active{ display:block }

    .grid{ display:grid; gap:14px }
    .grid.r2c3{ grid-template-columns: 260px 1fr }

    .card{ background:#0c1330; border:1px solid rgba(255,255,255,.1); border-radius:16px; padding:14px; box-shadow:0 8px 26px rgba(0,0,0,.35); }
    .card h3{ margin:.2rem 0 .8rem; font-size:14px; letter-spacing:.4px }

    .routes-list{ max-height:520px; overflow:auto; padding-right:6px }
    .route-item{ display:flex; justify-content:space-between; align-items:center; padding:10px 12px; margin:8px 0; border:1px solid rgba(255,255,255,.08); border-radius:12px; cursor:pointer; background:#0a1330 }
    .route-item:hover{ background:#0c173b }
    .route-item.active{ outline:2px solid var(--ring) }
    .badge{ padding:2px 8px; border-radius:999px; font-size:12px; font-weight:800 }
    .badge.pending{ background:#19203f; color:#c7d2ff }
    .badge.caught{ background:#0a3a31; color:#8af0c9 }
    .badge.failed{ background:#3a1010; color:#ff9b9b }

    .encounter{ display:grid; grid-template-columns: 1.2fr 1fr; gap:14px }
    .encounter .preview{ display:flex; gap:18px; align-items:center }
    .sprite{ width:88px; height:88px; border-radius:12px; background:#0b122f; border:1px solid rgba(255,255,255,.12); display:grid; place-items:center }
    .sprite img{ max-width:90%; max-height:90%; image-rendering: pixelated }

    .row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap }
    input[type=text], input[type=search], select{
      background:#0b1433; border:1px solid rgba(255,255,255,.18); border-radius:12px; color:#e8ecff;
      padding:10px 12px; min-width:180px; outline:none; box-shadow:inset 0 0 0 0 var(--ring); transition:.2s;
    }
    input[type=text]:focus, input[type=search]:focus, select:focus{ box-shadow: inset 0 0 0 2px var(--ring) }

    .btn{ border:1px solid rgba(255,255,255,.22); background:#0e183b; color:#fff; padding:10px 14px; border-radius:12px; cursor:pointer; font-weight:800; letter-spacing:.2px; transition:.18s; }
    .btn:hover{ transform:translateY(-1px) }
    .btn.ok{ background:#0f3d33; border-color:#135e4e }
    .btn.bad{ background:#3a1414; border-color:#6a2222 }
    .btn.warn{ background:#3a320f; border-color:#6a5922 }

    /* Box & Team */
    .box-grid{ display:grid; grid-template-columns: repeat(auto-fill, minmax(160px,1fr)); gap:14px }
    .poke-card{ position:relative; border:1px solid rgba(255,255,255,.12); border-radius:16px; background:linear-gradient(180deg,#0d1a3f,#0b1430); padding:10px; display:grid; gap:8px; cursor:grab }
    .poke-card.dragging{ opacity:.6 }
    .poke-top{ display:flex; justify-content:space-between; align-items:center }
    .poke-name{ font-weight:800; letter-spacing:.2px }
    .tag{ font-size:11px; color:#b6c3f8 }
    .poke-sprite{ width:100%; aspect-ratio:1/1; display:grid; place-items:center; background:#0a1231; border:1px dashed rgba(255,255,255,.12); border-radius:12px }
    .poke-sprite img{ max-width:80%; max-height:80%; image-rendering: pixelated }
    .ribbon{ position:absolute; top:8px; left:-6px; background:var(--pk-yellow); color:#111; padding:3px 10px; border-radius:6px; font-size:11px; font-weight:900; box-shadow:0 2px 10px rgba(0,0,0,.3) }

    .team-wrap{ display:grid; grid-template-columns: repeat(6, 1fr); gap:12px }
    .slot{ border:2px dashed rgba(255,255,255,.2); border-radius:16px; min-height:160px; display:grid; place-items:center; padding:10px; background:rgba(255,255,255,.02) }
    .slot.over{ outline:3px solid var(--ring) }
    .slot .slot-inner{ text-align:center; color:#90a2ea }
    .slot .slot-inner img{ width:72px; height:72px }
    .slot .meta{ font-size:12px; color:#b0baf0 }
    .slot .actions{ margin-top:6px }

    .links-table{ width:100%; border-collapse:separate; border-spacing:0 8px }
    .links-table th, .links-table td{ text-align:left; padding:10px 12px }
    .links-table tr{ background:#0b1433; border:1px solid rgba(255,255,255,.12) }
    .links-table tr td:first-child, .links-table tr th:first-child{ border-top-left-radius:12px; border-bottom-left-radius:12px }
    .links-table tr td:last-child, .links-table tr th:last-child{ border-top-right-radius:12px; border-bottom-right-radius:12px }

    .login-overlay{
      position:fixed; inset:0; background:radial-gradient(800px 400px at 20% 0%, rgba(255,89,95,.25), rgba(0,0,0,.65) 40%, rgba(0,0,0,.9) 100%);
      display:grid; place-items:center; z-index:99;
    }
    .login-card{ width:min(560px, 92vw); background:#0b1433; border:1px solid rgba(255,255,255,.15); border-radius:18px; padding:20px; text-align:center; box-shadow:0 24px 80px rgba(0,0,0,.45) }
    .login-card h1{ font-family:"Press Start 2P"; font-size:20px; margin:10px 0 18px }
    .row.center{ justify-content:center }
    .helper{ color:#9fb1ff; font-size:12px }
    .pill{ display:inline-flex; align-items:center; gap:10px; border:1px solid rgba(255,255,255,.12); background:#0d153a; padding:10px 12px; border-radius:12px }
    .pill b{ color:#fff }
    .footer{ margin-top:14px; color:#91a3ea; font-size:12px }
    .footer a{ color:#fff }

    @media (max-width:900px){
      .grid.r2c3{ grid-template-columns: 1fr }
      .encounter{ grid-template-columns:1fr }
      .team-wrap{ grid-template-columns: repeat(3, 1fr) }
    }
    .login-overlay[hidden]{ display:none !important }
    .status-note{ color:var(--muted); font-weight:800 }
    .drawer{ margin-top:12px }
    .poke-card.selected{ outline:2px solid var(--ring) }
    .pick-hint{ font-size:12px; color:var(--pk-yellow) }

    .players{ display:grid; gap:10px }
    .player{ display:flex; align-items:center; justify-content:space-between; padding:10px 12px; border:1px solid rgba(255,255,255,.12); border-radius:12px; background:#0b1433 }
    .player .name{ font-weight:800 }
    .player .meta{ color:#9fb1ff; font-size:12px }
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo" aria-hidden="true"></div>
      <div class="title">Nuzlocke Companion<small>Single Player • Pokémon Style</small></div>
    </div>
    <nav class="tabs" id="tabs">
      <button class="tab-btn active" data-tab="routes">Routen</button>
      <button class="tab-btn" data-tab="box">Box</button>
      <button class="tab-btn" data-tab="team">team</button>
      <button class="tab-btn" data-tab="allteams">all Teams</button>
      <button class="tab-btn" data-tab="lobby">Lobby</button>
    </nav>
  </header>

  <main>
    <!-- ROUTES -->
    <section class="panel active" id="panel-routes">
      <div class="grid r2c3">
        <aside class="card">
          <h3>Routen & Orte</h3>
          <div class="row" style="margin-bottom:10px">
            <input id="addRouteName" type="text" placeholder="Eigene Route hinzufügen…" />
            <button class="btn" id="addRouteBtn">+ Hinzufügen</button>
          </div>
          <div class="routes-list" id="routesList"></div>
        </aside>
        <div class="card">
          <h3>Encounter</h3>
          <div id="encounterPane">
            <p class="helper">Wähle links eine Route, um ein Pokémon zuzuweisen.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- BOX -->
    <section class="panel" id="panel-box">
      <div class="row" style="justify-content:space-between; align-items:center; margin-bottom:10px">
        <h3 style="margin:0">Pokémon Box</h3>
        <div class="row">
          <button class="btn warn" id="exportBtn">Daten exportieren</button>
          <label class="btn" for="importFile">Daten importieren</label>
          <input id="importFile" type="file" accept="application/json" style="display:none" />
        </div>
      </div>
      <div class="box-grid" id="boxGrid"></div>
    </section>

    <!-- SELECT (Team) -->
    <section class="panel" id="panel-team">
      <h3>Team (max. 6)</h3>
      <div class="team-wrap" id="teamWrap"></div>
      <p class="helper pick-hint" id="pickHint" style="margin-top:8px; display:none">
        Auswahl aktiv: Klick einen Slot, um das Pokémon zu platzieren. (Oder ziehe es per Drag & Drop.)
      </p>

      <div class="card drawer">
        <h3>Box (Schnellzugriff)</h3>
        <div class="box-grid" id="boxDrawer"></div>
      </div>

      <div class="card" style="margin-top:12px">
        <h3>Route-Gruppen</h3>
        <div id="routeGroups"></div>
      </div>
    </section>

    <!-- ALL TEAMS -->
    <section class="panel" id="panel-allteams">
      <h3>Alle Teams</h3>
      <div id="nz-allteams"></div>
    </section>

    <!-- LOBBY -->
    <section class="panel" id="panel-lobby">
      <div id="nz-lobby"></div>
      <div class="row" style="justify-content:space-between; align-items:center; margin-bottom:10px">
        <h3 style="margin:0">Lobby</h3>
        <span class="pill">Spieler: <b id="playerNameBadge">–</b></span>
      </div>
      <div class="players" id="playersList"></div>
    </section>
  </main>

  <!-- LOGIN OVERLAY -->
  <div class="login-overlay" id="loginOverlay" hidden>
    <div class="login-card">
      <h1>Willkommen, Trainer!</h1>
      <p class="helper">Erstelle einen lokalen Trainer, um deine Nuzlocke zu tracken. (Alles wird nur im Browser gespeichert.)</p>
      <div class="row center" style="margin:14px 0 6px">
        <input id="trainerName" type="text" placeholder="Dein Trainername" />
        <button class="btn ok" id="startBtn">In die Lobby</button>
      </div>
      <p class="footer">Multiplayer ist aktiv – Lobby-Tab nutzen. 🎮</p>
    </div>
  </div>
  

  <script type="module" src="./nuz.js"></script>
<script type="module" src="./multiplayer2.js"></script>
    
</body>
</html>
